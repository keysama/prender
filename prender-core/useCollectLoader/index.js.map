{"version":3,"file":"index.js","sources":["../src/pkg/useLoader.js"],"sourcesContent":["const path = require(\"path\");\n\nfunction useCollectLoader(config,env){\n    let targetIndex;\n\n    let targetRules = config.module.rules[1].oneOf.filter((item,key)=>{\n        if(typeof item.test == \"object\" && !Array.isArray(item.test) && item.test.test(\".jsx\") && !item.exclude ){\n            targetIndex = key;\n            return true;\n        }\n    })[0];\n\n    let targetUse = [\n        {\n            loader : targetRules.loader,\n            options : JSON.parse(JSON.stringify(targetRules.options))\n        },\n        {\n            loader : require.resolve(\"prender-core/loader\")\n        }\n    ]\n\n    delete targetRules.loader;\n    delete targetRules.options;\n\n    targetRules.use = targetUse;\n\n    return config\n}\n\nmodule.exports = useCollectLoader"],"names":["require","useCollectLoader","config","env","targetRules","module","rules","oneOf","filter","item","key","test","Array","isArray","exclude","targetUse","loader","options","JSON","parse","stringify","resolve","use","exports"],"mappings":";;;;;;;;;;;;;;;;;;AAAaA,OAAO,CAAC,MAAD;;AAEpB,SAASC,gBAAT,CAA0BC,MAA1B,EAAiCC,GAAjC,EAAqC;AAGjC,MAAIC,WAAW,GAAGF,MAAM,CAACG,MAAP,CAAcC,KAAd,CAAoB,CAApB,EAAuBC,KAAvB,CAA6BC,MAA7B,CAAoC,UAACC,IAAD,EAAMC,GAAN,EAAY;AAC9D,QAAG,QAAOD,IAAI,CAACE,IAAZ,KAAoB,QAApB,IAAgC,CAACC,KAAK,CAACC,OAAN,CAAcJ,IAAI,CAACE,IAAnB,CAAjC,IAA6DF,IAAI,CAACE,IAAL,CAAUA,IAAV,CAAe,MAAf,CAA7D,IAAuF,CAACF,IAAI,CAACK,OAAhG,EAAyG;AAErG,aAAO,IAAP;AACH;AACJ,GALiB,EAKf,CALe,CAAlB;AAOA,MAAIC,SAAS,GAAG,CACZ;AACIC,IAAAA,MAAM,EAAGZ,WAAW,CAACY,MADzB;AAEIC,IAAAA,OAAO,EAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAehB,WAAW,CAACa,OAA3B,CAAX;AAFd,GADY,EAKZ;AACID,IAAAA,MAAM,EAAGhB,OAAO,CAACqB,OAAR,CAAgB,qBAAhB;AADb,GALY,CAAhB;AAUA,SAAOjB,WAAW,CAACY,MAAnB;AACA,SAAOZ,WAAW,CAACa,OAAnB;AAEAb,EAAAA,WAAW,CAACkB,GAAZ,GAAkBP,SAAlB;AAEA,SAAOb,MAAP;AACH;;AAEDG,MAAM,CAACkB,OAAP,GAAiBtB,gBAAjB;;"}