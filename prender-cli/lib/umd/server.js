!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";const i=require("koa"),e=require("koa-static"),r=require("koa-router"),s=require("path"),a=require("fs");module.exports=class{constructor({port:t=8910,staticPath:e=s.join(__dirname,"./target")}){this.port=t,this.staticPath=e,this._app=new i,this._nativeServer=null,this._router=new r}async initialize(){return new Promise(t=>{this._app.use(e(s.resolve(this.staticPath))),this._router.get(/.*/,async(t,e)=>{t.type="html",t.body=a.createReadStream(s.join(this.staticPath,"./index.html")),await e()}),this._app.use(this._router.routes()),this._app.use(this._router.allowedMethods()),this._nativeServer=this._app.listen(this.port,t)})}destroy(){this._nativeServer.close()}}});
