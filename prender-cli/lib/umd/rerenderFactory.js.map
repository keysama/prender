{"version":3,"file":"rerenderFactory.js","sources":["../../src/rerenderFactory.js"],"sourcesContent":["const path = require('path');\nconst puppeteer = require(\"puppeteer\");\nconst Rerender = require(\"./rerender\");\n\nclass RerenderFactory {\n    constructor(\n        puppeteerOptions = { headless: true },\n        pageOptions = { waituntil: 'networkidle0', timeout: 0 },\n        {\n            targetDir = path.join(__dirname, \"./rebuild\"),\n            debug = false\n        }\n    ) {\n        this.puppeteerOptions = puppeteerOptions;\n        this.pageOptions = pageOptions;\n        this.browser = null;\n        this.puppeteer = puppeteer;\n        this.targetDir = targetDir;\n        this.debug = debug;\n    }\n\n    async initialize() {\n        if (this.browser) {\n            return this.browser;\n        }\n\n        this.browser = await this.puppeteer.launch(this.puppeteerOptions);\n    }\n\n    async create(url, mode, pageOptions = this.pageOptions) {\n        if (!this.browser) {\n            //to do\n            this.browser = await this.puppeteer.launch(this.puppeteerOptions);\n        }\n\n        return new Rerender(this.browser, url, mode, pageOptions, this.targetDir, this.debug);\n    }\n\n    async close() {\n        await this.browser.close();\n    }\n}\n\nmodule.exports = RerenderFactory;"],"names":["path","require","puppeteer","Rerender","RerenderFactory","constructor","puppeteerOptions","headless","pageOptions","waituntil","timeout","targetDir","join","__dirname","debug","browser","initialize","launch","create","url","mode","close","module","exports"],"mappings":";;;;;IAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;IACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAzB;;IACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,YAAD,CAAxB;;IAEA,MAAMG,eAAN,CAAsB;IAClBC,EAAAA,WAAW,CACPC,gBAAgB,GAAG;IAAEC,IAAAA,QAAQ,EAAE;IAAZ,GADZ,EAEPC,WAAW,GAAG;IAAEC,IAAAA,SAAS,EAAE,cAAb;IAA6BC,IAAAA,OAAO,EAAE;IAAtC,GAFP,EAGP;IACIC,IAAAA,SAAS,GAAGX,IAAI,CAACY,IAAL,CAAUC,SAAV,EAAqB,WAArB,CADhB;IAEIC,IAAAA,KAAK,GAAG;IAFZ,GAHO,EAOT;IACE,SAAKR,gBAAL,GAAwBA,gBAAxB;IACA,SAAKE,WAAL,GAAmBA,WAAnB;IACA,SAAKO,OAAL,GAAe,IAAf;IACA,SAAKb,SAAL,GAAiBA,SAAjB;IACA,SAAKS,SAAL,GAAiBA,SAAjB;IACA,SAAKG,KAAL,GAAaA,KAAb;IACH;;IAEe,QAAVE,UAAU,GAAG;IACf,QAAI,KAAKD,OAAT,EAAkB;IACd,aAAO,KAAKA,OAAZ;IACH;;IAED,SAAKA,OAAL,GAAe,MAAM,KAAKb,SAAL,CAAee,MAAf,CAAsB,KAAKX,gBAA3B,CAArB;IACH;;IAEW,QAANY,MAAM,CAACC,GAAD,EAAMC,IAAN,EAAYZ,WAAW,GAAG,KAAKA,WAA/B,EAA4C;IACpD,QAAI,CAAC,KAAKO,OAAV,EAAmB;IACf;IACA,WAAKA,OAAL,GAAe,MAAM,KAAKb,SAAL,CAAee,MAAf,CAAsB,KAAKX,gBAA3B,CAArB;IACH;;IAED,WAAO,IAAIH,QAAJ,CAAa,KAAKY,OAAlB,EAA2BI,GAA3B,EAAgCC,IAAhC,EAAsCZ,WAAtC,EAAmD,KAAKG,SAAxD,EAAmE,KAAKG,KAAxE,CAAP;IACH;;IAEU,QAALO,KAAK,GAAG;IACV,UAAM,KAAKN,OAAL,CAAaM,KAAb,EAAN;IACH;;IApCiB;;IAuCtBC,MAAM,CAACC,OAAP,GAAiBnB,eAAjB;;;;;;"}